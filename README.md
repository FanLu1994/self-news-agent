# AI News Agent

> åŸºäº `@mariozechner/pi-ai` å’Œ `@mariozechner/pi-coding-agent` çš„ AI æ–°é—»çƒ­ç‚¹æœé›†å’Œæ€»ç»“ Agent  
> ä½¿ç”¨ GLM-4 å¤§æ¨¡å‹è¿›è¡Œæ™ºèƒ½åˆ†æ

## ğŸ“‹ é¡¹ç›®ç®€ä»‹

è¿™æ˜¯ä¸€ä¸ªæ•™å­¦é¡¹ç›®ï¼Œæ—¨åœ¨å±•ç¤ºå¦‚ä½•ä½¿ç”¨ `@mariozechner/pi-ai` å’Œ `@mariozechner/pi-coding-agent` ä¸¤ä¸ªå¼ºå¤§çš„åº“æ¥æ„å»ºè‡ªå®šä¹‰ AI Agentã€‚

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
- ğŸ” ä» HackerNews å’Œä¸­æ–‡ç§‘æŠ€åª’ä½“è·å–æœ€æ–° AI/ç§‘æŠ€æ–°é—»
- ğŸŒ æ”¯æŒ Ve2xã€Linux.doã€Redditã€Product Hunt å¤šæºæŠ“å–
- ğŸ¤– æ”¯æŒ GLM / OpenAI / Claude / Gemini ç­‰å¤šæ¨¡å‹ API åˆ†ææ€»ç»“
- ğŸŒ æ”¯æŒä¸­è‹±åŒè¯­æ–°é—»æº
- ğŸ“Š æä¾›è¯¦ç»†çš„è¶‹åŠ¿åˆ†æå’Œè¡Œä¸šæ´å¯Ÿ
- ğŸ› ï¸ å®Œæ•´çš„è‡ªå®šä¹‰å·¥å…·å®ç°ç¤ºä¾‹
- ğŸ¦ æ”¯æŒä» X/Twitter è·å–å…³é”®è¯çƒ­ç‚¹ï¼ˆå¯é€‰ï¼‰
- âš™ï¸ å…³é”®è¯ã€RSS æºã€æ—¶é—´çª—å£ç­‰å¯é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®
- ğŸ“® æ”¯æŒå°†æ‘˜è¦æ¨é€åˆ° Telegramï¼ˆå¯é€‰ï¼‰
- âœ‰ï¸ æ”¯æŒæ‘˜è¦ç”Ÿæˆåé‚®ä»¶æ¨é€ï¼ˆResendï¼Œå¯é€‰ï¼‰
- ğŸ“° è‡ªåŠ¨ç”Ÿæˆå¯è®¢é˜…çš„ RSS æ‘˜è¦æ–‡ä»¶
- ğŸ“ è‡ªåŠ¨ç”Ÿæˆ `docs/daily/YYYY-MM-DD.md` å¹¶å›å†™ README æœ€æ–°æ‘˜è¦ä¸è¯é¢˜è¶‹åŠ¿

<!-- digest:latest:start -->
## æœ€æ–°ç®€æŠ¥ (2026-02-22)



é‡ç‚¹:


å®Œæ•´å†…å®¹: [docs/daily/2026-02-22.md](docs/daily/2026-02-22.md)
<!-- digest:latest:end -->

<!-- digest:trend:start -->
## è¯é¢˜è¶‹åŠ¿ (2026-02-22)

| Topic | 7d | 30d | è¿‘7å¤©åˆ†å¸ƒ |
| --- | --- | --- | --- |
| Other | 192 | 192 | 0, 0, 0, 44, 47, 50, 51 |
| AI | 180 | 180 | 0, 0, 0, 47, 43, 44, 46 |
| Data | 50 | 50 | 0, 0, 0, 13, 9, 14, 14 |
| Frontend | 16 | 16 | 0, 0, 0, 5, 5, 5, 1 |
| Backend | 8 | 8 | 0, 0, 0, 2, 3, 2, 1 |
| OpenSource | 8 | 8 | 0, 0, 0, 2, 2, 2, 2 |
| Mobile | 4 | 4 | 0, 0, 0, 1, 2, 0, 1 |
| Startup | 4 | 4 | 0, 0, 0, 1, 1, 1, 1 |
| Security | 3 | 3 | 0, 0, 0, 2, 1, 0, 0 |
| Cloud | 3 | 3 | 0, 0, 0, 1, 1, 0, 1 |
<!-- digest:trend:end -->

**æ•™å­¦ä»·å€¼**ï¼š
- âœ… å­¦ä¹ å¦‚ä½•å®šä¹‰å’Œå®ç°è‡ªå®šä¹‰å·¥å…·ï¼ˆToolï¼‰
- âœ… å­¦ä¹ å¦‚ä½•åˆ›å»ºå’Œé…ç½® AI Agent
- âœ… å­¦ä¹ å¦‚ä½•ä½¿ç”¨ GLM-4 è¿›è¡Œ LLM è°ƒç”¨
- âœ… å­¦ä¹ å·¥å…·é“¾ï¼ˆtool chainingï¼‰çš„å®ç°
- âœ… å­¦ä¹ äº‹ä»¶é©±åŠ¨çš„ Agent æ¶æ„
- âœ… çœŸå®çš„ API é›†æˆå’Œæ•°æ®å¤„ç†

---

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

```
pi-agent/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ news.types.ts           # TypeScript ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ hackernews.service.ts  # HackerNews API å°è£…
â”‚   â”‚   â””â”€â”€ rss.service.ts         # RSS è§£ææœåŠ¡
â”‚   â”œâ”€â”€ tools/
â”‚   â”‚   â”œâ”€â”€ fetch-news.tool.ts     # å·¥å…·1: æ–°é—»è·å–
â”‚   â”‚   â””â”€â”€ summarize-news.tool.ts # å·¥å…·2: GLM-4 æ€»ç»“
â”‚   â”œâ”€â”€ agent.ts                    # Agent æ ¸å¿ƒé€»è¾‘
â”‚   â””â”€â”€ index.ts                    # ä¸»å…¥å£
â”œâ”€â”€ examples/
â”‚   â”œâ”€â”€ basic-usage.ts             # åŸºç¡€ä½¿ç”¨ç¤ºä¾‹
â”‚   â””â”€â”€ advanced-usage.ts          # é«˜çº§ä½¿ç”¨ç¤ºä¾‹
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ .env.example
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

å®Œæ•´é…ç½®æµç¨‹è§ï¼š`docs/configuration-guide.md`

### 1. ç¯å¢ƒè¦æ±‚

- Node.js >= 18.0.0
- npm >= 9.0.0
- GLM-4 API Key (ä» [æ™ºè°±AI](https://open.bigmodel.cn/) è·å–)

### 2. å®‰è£…ä¾èµ–

```bash
cd pi-agent
npm install
```

### 3. é…ç½® API Key

åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
cp .env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œæ·»åŠ ä½ çš„ GLM-4 API Keyï¼š

```env
ZHIPU_API_KEY=your_actual_api_key_here
```

### 4. è¿è¡Œ Agent

```bash
# è¿è¡Œèšåˆæµæ°´çº¿ï¼ˆæŠ“å– -> AI åˆ†æ -> Markdown/README -> æ¨é€ï¼‰
npm run start:digest

# æ¯æ—¥ä¸¤æ¬¡è°ƒåº¦æ‰§è¡Œï¼ˆé»˜è®¤ 09:00,18:00ï¼‰
npm run start:schedule

# è¿è¡Œå¯¹è¯å¼ Agent æ¨¡å¼
npm start -- --agent "è·å–æœ€æ–°çš„å¤§æ¨¡å‹å’ŒAIåº”ç”¨ç›¸å…³æ–°é—»"

# Agent æ¨¡å¼ï¼ˆè‹±æ–‡ï¼‰
npm start -- --agent "Get the latest machine learning breakthroughs from the past week"

# Telegram å¯¹è¯æ¨¡å¼ï¼ˆBot æ”¶æ¶ˆæ¯å¹¶è°ƒç”¨ Agent è‡ªåŠ¨å›å¤ï¼‰
npm run start:telegram

# è¿è¡ŒåŸºç¡€ç¤ºä¾‹
npm run example:basic

# è¿è¡Œé«˜çº§ç¤ºä¾‹
npm run example:advanced
```

---

## â° GitHub Actions å®šæ—¶è¿è¡Œ

å·²æä¾›å·¥ä½œæµï¼š`.github/workflows/digest-schedule.yml`

- å®šæ—¶ï¼šæ¯å¤© `09:00`ã€`18:00`ï¼ˆåŒ—äº¬æ—¶é—´ï¼ŒGitHub ä½¿ç”¨ UTC çš„ `01:00`ã€`10:00`ï¼‰
- æ”¯æŒæ‰‹åŠ¨è§¦å‘ï¼š`workflow_dispatch`
- æ‰§è¡Œåä¼šè‡ªåŠ¨æäº¤æ›´æ–°çš„ `README.md`ã€`docs/daily`ã€`data`ã€`output`

è¯·åœ¨ä»“åº“ `Settings -> Secrets and variables -> Actions` ä¸­é…ç½®è‡³å°‘ä»¥ä¸‹ Secretsï¼š

- `ZAI_API_KEY`ï¼ˆæˆ–ä½ å®é™…ä½¿ç”¨çš„æ¨¡å‹ API Keyï¼‰
- `LLM_PROVIDER`ã€`LLM_MODEL`
- `TELEGRAM_BOT_TOKEN`ã€`TELEGRAM_CHAT_ID`ï¼ˆå¦‚æœéœ€è¦ Telegram æ¨é€ï¼‰
- `EMAIL_ENABLED`ã€`RESEND_API_KEY`ã€`EMAIL_FROM`ã€`EMAIL_TO`ï¼ˆå¦‚æœéœ€è¦é‚®ä»¶æ¨é€ï¼‰

å¯é€‰ Secretsï¼ˆä¸é…åˆ™èµ°ä»£ç é»˜è®¤å€¼ï¼‰ï¼š

- `NEWS_KEYWORDS`ã€`RSS_FEEDS`ã€`VE2X_FEEDS`ã€`LINUX_DO_FEEDS`ã€`REDDIT_FEEDS`ã€`PRODUCT_HUNT_FEEDS`
- `INCLUDE_GITHUB_TRENDING`ã€`INCLUDE_VE2X`ã€`INCLUDE_LINUX_DO`ã€`INCLUDE_REDDIT`ã€`INCLUDE_PRODUCT_HUNT`ã€`INCLUDE_TWITTER`
- `GITHUB_TRENDING_LANGUAGES`ã€`X_BEARER_TOKEN`ã€`X_KEYWORDS`

---

## ğŸ“š æ ¸å¿ƒæ¦‚å¿µæ•™å­¦

### ä¸€ã€@mariozechner/pi-ai æ ¸å¿ƒç”¨æ³•

#### 1. æ¨¡å‹é…ç½®

```typescript
import { getModel } from '@mariozechner/pi-ai';

// é…ç½® GLM-4 æ¨¡å‹
const model = getModel('zhipu', 'glm-4');

// æ”¯æŒçš„å…¶ä»–æ¨¡å‹
const gpt4 = getModel('openai', 'gpt-4o');
const claude = getModel('anthropic', 'claude-sonnet-4-20250514');
const gemini = getModel('google', 'gemini-2.5-flash');
```

**æ•™å­¦è¦ç‚¹**ï¼š
- `getModel(provider, modelName)` ç»Ÿä¸€æ¥å£
- æ”¯æŒ 20+ AI æä¾›å•†
- è½»æ¾åˆ‡æ¢ä¸åŒ LLM

#### 2. Context ç®¡ç†

```typescript
import type { Context } from '@mariozechner/pi-ai';

const context: Context = {
  systemPrompt: 'You are a helpful assistant.',
  messages: [
    {
      role: 'user',
      content: 'What is TypeScript?',
      timestamp: Date.now()
    }
  ],
  tools: []  // å¯é€‰ï¼šå·¥å…·å®šä¹‰
};
```

**æ•™å­¦è¦ç‚¹**ï¼š
- `systemPrompt` å®šä¹‰ AI è¡Œä¸º
- `messages` å­˜å‚¨å¯¹è¯å†å²
- `tools` æ³¨å†Œå¯ç”¨å·¥å…·

#### 3. LLM è°ƒç”¨

```typescript
import { complete } from '@mariozechner/pi-ai';

// ä¸€æ¬¡æ€§è°ƒç”¨
const response = await complete(model, context);

// æå–æ–‡æœ¬
const text = response.content
  .filter(block => block.type === 'text')
  .map(block => block.text)
  .join('\n');

// Token ç»Ÿè®¡
console.log('Tokens:', response.usage.totalTokens);
console.log('Cost:', response.usage.cost.total);
```

**æ•™å­¦è¦ç‚¹**ï¼š
- `complete()` ç”¨äºä¸€æ¬¡æ€§è°ƒç”¨
- `stream()` ç”¨äºæµå¼è¾“å‡º
- è‡ªåŠ¨è¿½è¸ª token ä½¿ç”¨å’Œæˆæœ¬

#### 4. å·¥å…·å®šä¹‰

```typescript
import { Type } from '@sinclair/typebox';
import { StringEnum } from '@mariozechner/pi-ai';
import type { Tool } from '@mariozechner/pi-ai';

const myTool: Tool = {
  name: 'my_tool',
  description: 'Tool description for the LLM',
  
  // å‚æ•°å®šä¹‰
  parameters: Type.Object({
    category: StringEnum(['option1', 'option2'] as const, {
      description: 'Category description',
      default: 'option1'
    }),
    limit: Type.Number({
      description: 'Maximum number',
      default: 10,
      minimum: 1,
      maximum: 100
    })
  }),
  
  // æ‰§è¡Œé€»è¾‘
  async execute(toolCallId, params, signal, onUpdate, ctx) {
    // æ£€æŸ¥å–æ¶ˆ
    if (signal?.aborted) {
      throw new Error('Cancelled');
    }
    
    // è¿›åº¦åé¦ˆ
    onUpdate?.({
      content: [{ type: 'text', text: 'Processing...' }],
      details: { progress: 50 }
    });
    
    // æ‰§è¡Œä¸šåŠ¡é€»è¾‘
    const result = await doSomething(params);
    
    // è¿”å›ç»“æœ
    return {
      content: [{ type: 'text', text: JSON.stringify(result) }],
      details: { count: result.length }
    };
  }
};
```

**æ•™å­¦è¦ç‚¹**ï¼š
- ä½¿ç”¨ `Type.Object` å®šä¹‰å‚æ•°
- ä½¿ç”¨ `StringEnum` å®šä¹‰æšä¸¾ï¼ˆå…¼å®¹æ‰€æœ‰ LLMï¼‰
- `execute()` å¿…é¡»æ˜¯ async å‡½æ•°
- ä½¿ç”¨ `onUpdate()` æä¾›è¿›åº¦
- æ£€æŸ¥ `signal?.aborted` æ”¯æŒå–æ¶ˆ
- è¿”å› `{ content, details }` ç»“æ„

---

### äºŒã€@mariozechner/pi-coding-agent æ ¸å¿ƒç”¨æ³•

#### 1. Agent åˆ›å»º

```typescript
import { Agent } from '@mariozechner/pi-agent-core';
import { getModel } from '@mariozechner/pi-ai';

const agent = new Agent({
  initialState: {
    // ç³»ç»Ÿæç¤ºè¯
    systemPrompt: 'You are a helpful assistant with tools.',
    
    // LLM æ¨¡å‹
    model: getModel('zhipu', 'glm-4'),
    
    // æ³¨å†Œå·¥å…·
    tools: [tool1, tool2],
    
    // åˆå§‹æ¶ˆæ¯
    messages: []
  }
});
```

**æ•™å­¦è¦ç‚¹**ï¼š
- `new Agent({ initialState })` åˆ›å»º Agent
- `systemPrompt` å®šä¹‰ Agent è§’è‰²å’Œè¡Œä¸º
- `tools` æ•°ç»„æ³¨å†Œæ‰€æœ‰å¯ç”¨å·¥å…·
- `model` æŒ‡å®šä½¿ç”¨çš„ LLM

#### 2. äº‹ä»¶è®¢é˜…

```typescript
agent.subscribe((event) => {
  switch (event.type) {
    case 'message_update':
      // å¤„ç†æ¶ˆæ¯æ›´æ–°
      const msgEvent = event.assistantMessageEvent;
      
      if (msgEvent.type === 'text_delta') {
        // æµå¼æ–‡æœ¬è¾“å‡º
        process.stdout.write(msgEvent.delta);
      }
      else if (msgEvent.type === 'toolcall_end') {
        // å·¥å…·è°ƒç”¨å®Œæˆ
        console.log(`Tool ${msgEvent.toolCall.name} completed`);
      }
      break;
      
    case 'tool_result':
      // å·¥å…·æ‰§è¡Œç»“æœ
      console.log('Tool result:', event.toolName);
      console.log('Details:', event.details);
      break;
      
    case 'error':
      // é”™è¯¯å¤„ç†
      console.error('Error:', event.error.message);
      break;
  }
});
```

**æ•™å­¦è¦ç‚¹**ï¼š
- `agent.subscribe()` è®¢é˜…æ‰€æœ‰äº‹ä»¶
- `message_update` - æ¶ˆæ¯æµå¼æ›´æ–°
- `tool_result` - å·¥å…·æ‰§è¡Œç»“æœ
- `error` - é”™è¯¯äº‹ä»¶
- äº‹ä»¶ç±»å‹ï¼š`text_delta`, `toolcall_delta`, `toolcall_end`

#### 3. å‘èµ·å¯¹è¯

```typescript
// å‘é€æ–‡æœ¬æç¤º
await agent.prompt('Your query here');

// å¸¦å›¾åƒçš„æç¤ºï¼ˆå¦‚æœéœ€è¦ï¼‰
await agent.prompt('Describe this image', [
  {
    type: 'image',
    data: base64ImageData,
    mimeType: 'image/jpeg'
  }
]);
```

**æ•™å­¦è¦ç‚¹**ï¼š
- `agent.prompt()` å‘èµ·å¯¹è¯
- æ”¯æŒå¤šæ¨¡æ€è¾“å…¥ï¼ˆæ–‡æœ¬ + å›¾åƒï¼‰
- è‡ªåŠ¨å¤„ç†å·¥å…·è°ƒç”¨é“¾

---

## ğŸ”§ é¡¹ç›®å®ç°è¯¦è§£

### å·¥å…· 1: fetch_newsï¼ˆæ–°é—»è·å–ï¼‰

**ä½ç½®**: `src/tools/fetch-news.tool.ts`

**åŠŸèƒ½**ï¼šä» HackerNews å’Œä¸­æ–‡ RSS feeds è·å– AI/ç§‘æŠ€æ–°é—»

**æ•°æ®æº**ï¼š
- **HackerNews** (70-80%, è‹±æ–‡)
  - Top Stories API
  - Best Stories API  
  - AI å…³é”®è¯æ™ºèƒ½è¿‡æ»¤
  
- **ä¸­æ–‡ RSS Feeds** (20-30%, ä¸­æ–‡)
  - æœºå™¨ä¹‹å¿ƒ
  - æ–°æ™ºå…ƒ
  - AIç§‘æŠ€å¤§æœ¬è¥

**å‚æ•°**ï¼š

```typescript
{
  category: 'ai' | 'ml' | 'nlp' | 'cv' | 'robotics' | 'all',  // æ–°é—»åˆ†ç±»
  language: 'en' | 'zh' | 'all',  // è¯­è¨€è¿‡æ»¤
  limit: number,      // 1-50
  timeRange: '1d' | '3d' | '7d'  // æ—¶é—´èŒƒå›´
}
```

**æ ¸å¿ƒå®ç°**ï¼š

```typescript
async execute(toolCallId, params, signal, onUpdate, ctx) {
  // 1. å¹¶è¡Œè¯·æ±‚å¤šä¸ªæ•°æ®æº
  const [hnArticles, rssArticles] = await Promise.all([
    hackerNewsService.fetchAINews({ limit, timeRange }),
    rssService.fetchChineseNews({ limit, timeRange })
  ]);
  
  // 2. åˆå¹¶å’Œæ’åº
  let allArticles = [...hnArticles, ...rssArticles];
  allArticles.sort(byPublishDate);
  
  // 3. è¿”å›ç»“æ„åŒ–æ•°æ®
  return {
    content: [{ type: 'text', text: formattedOutput }],
    details: { articleCount, distribution }
  };
}
```

**æ•™å­¦è¦ç‚¹**ï¼š
- å¹¶è¡Œ API è°ƒç”¨ (`Promise.all`)
- æ•°æ®è¿‡æ»¤å’Œè½¬æ¢
- é”™è¯¯å¤„ç†å’Œé™çº§
- è¿›åº¦åé¦ˆå®ç°

---

### å·¥å…· 2: summarize_newsï¼ˆGLM-4 æ€»ç»“ï¼‰

**ä½ç½®**: `src/tools/summarize-news.tool.ts`

**åŠŸèƒ½**ï¼šä½¿ç”¨ GLM-4 å¯¹æ–°é—»è¿›è¡Œæ·±åº¦åˆ†æ

**å‚æ•°**ï¼š

```typescript
{
  newsData: string,  // JSON å­—ç¬¦ä¸²ï¼ˆä» fetch_news è·å–ï¼‰
  style: 'brief' | 'detailed' | 'keywords'  // æ€»ç»“é£æ ¼
}
```

**è¯¦ç»†æ¨¡å¼è¾“å‡º**ï¼š

```json
{
  "overview": "æ•´ä½“æ¦‚è¿°",
  "mainTopics": ["ä¸»é¢˜1", "ä¸»é¢˜2", ...],
  "keyTrends": ["è¶‹åŠ¿1", "è¶‹åŠ¿2", ...],
  "detailedAnalysis": {
    "breakthroughs": ["æŠ€æœ¯çªç ´"],
    "industryImpacts": ["è¡Œä¸šå½±å“"],
    "futureImplications": ["æœªæ¥å±•æœ›"],
    "regionalInsights": {
      "international": "å›½é™…åŠ¨æ€",
      "china": "ä¸­å›½åŠ¨æ€"
    }
  },
  "topArticles": [
    { "title": "...", "url": "...", "reason": "..." }
  ]
}
```

**æ ¸å¿ƒå®ç°**ï¼š

```typescript
async execute(toolCallId, params, signal, onUpdate, ctx) {
  // 1. è§£æè¾“å…¥æ•°æ®
  const newsJson = JSON.parse(params.newsData);
  
  // 2. é…ç½® GLM-4
  const model = getModel('zhipu', 'glm-4');
  
  // 3. æ„å»ºæç¤ºè¯
  const prompt = buildDetailedAnalysisPrompt(newsJson);
  
  // 4. è°ƒç”¨ LLM
  const response = await complete(model, {
    systemPrompt: 'You are an expert AI news analyst...',
    messages: [{ role: 'user', content: prompt }]
  });
  
  // 5. æå–ç»“æœå’Œç»Ÿè®¡
  const analysis = response.content[0].text;
  const usage = response.usage;
  
  // 6. è¿”å›æ ¼å¼åŒ–ç»“æœ
  return {
    content: [{ type: 'text', text: formattedAnalysis }],
    details: { tokenUsage: usage, ... }
  };
}
```

**æ•™å­¦è¦ç‚¹**ï¼š
- GLM-4 é…ç½®å’Œè°ƒç”¨
- æç¤ºè¯å·¥ç¨‹ï¼ˆè¯¦ç»†/ç®€çŸ­/å…³é”®è¯ï¼‰
- JSON è¾“å‡ºè§£æ
- Token ä½¿ç”¨è¿½è¸ª
- é”™è¯¯å¤„ç†

---

### Agent ä¸»ç¨‹åº

**ä½ç½®**: `src/agent.ts`

**æ ¸å¿ƒé…ç½®**ï¼š

```typescript
const agent = new Agent({
  initialState: {
    systemPrompt: `You are an AI News Research Assistant...
    
Available tools:
1. fetch_news - Retrieve news from HackerNews and RSS
2. summarize_news - Analyze with GLM-4

Workflow:
1. fetch_news to get articles
2. summarize_news to analyze
3. Present insights`,

    model: getModel('zhipu', 'glm-4'),
    tools: [fetchNewsTool, summarizeNewsTool],
    messages: []
  }
});
```

**äº‹ä»¶å¤„ç†**ï¼š

```typescript
agent.subscribe((event) => {
  switch (event.type) {
    case 'message_update':
      // æµå¼è¾“å‡ºã€å·¥å…·è°ƒç”¨è¿›åº¦
      handleMessageUpdate(event);
      break;
      
    case 'tool_result':
      // æ˜¾ç¤ºå·¥å…·æ‰§è¡Œè¯¦æƒ…
      console.log(`Tool ${event.toolName}:`, event.details);
      break;
      
    case 'error':
      // é”™è¯¯å¤„ç†
      console.error(event.error);
      break;
  }
});
```

**æ•™å­¦è¦ç‚¹**ï¼š
- Agent åˆå§‹åŒ–é…ç½®
- ç³»ç»Ÿæç¤ºè¯è®¾è®¡åŸåˆ™
- å·¥å…·é“¾è‡ªåŠ¨æµè½¬
- äº‹ä»¶é©±åŠ¨æ¶æ„
- æµå¼è¾“å‡ºå¤„ç†

---

## ğŸ“Š ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ 1: åŸºç¡€æŸ¥è¯¢

```bash
npm start "Get the latest AI news from the past week"
```

**é¢„æœŸæµç¨‹**ï¼š
1. Agent è°ƒç”¨ `fetch_news` å·¥å…·
2. è·å– 15+ ç¯‡æ–°é—»ï¼ˆè‹±æ–‡ + ä¸­æ–‡ï¼‰
3. Agent è‡ªåŠ¨è°ƒç”¨ `summarize_news`
4. GLM-4 åˆ†æå¹¶ç”Ÿæˆè¯¦ç»†æŠ¥å‘Š

### ç¤ºä¾‹ 2: ä¸­æ–‡æ–°é—»

```bash
npm start "è·å–æœ€æ–°çš„å¤§æ¨¡å‹å’Œè‡ªç„¶è¯­è¨€å¤„ç†ç›¸å…³æ–°é—»"
```

### ç¤ºä¾‹ 3: ç‰¹å®šåˆ†ç±»

```bash
npm start "Show me computer vision breakthroughs from the past 3 days"
```

### ç¤ºä¾‹ 4: å¯¹æ¯”åˆ†æ

```bash
npm start "Compare AI developments in Western vs Chinese tech communities"
```

---

## ğŸ“ å­¦ä¹ è¦ç‚¹æ€»ç»“

### @mariozechner/pi-ai

1. âœ… **æ¨¡å‹é…ç½®**: `getModel(provider, model)`
2. âœ… **Context ç®¡ç†**: `{ systemPrompt, messages, tools }`
3. âœ… **LLM è°ƒç”¨**: `complete()` å’Œ `stream()`
4. âœ… **å·¥å…·å®šä¹‰**: `Type.Object()`, `StringEnum()`
5. âœ… **Token è¿½è¸ª**: `response.usage`
6. âœ… **å¤šæä¾›å•†**: è½»æ¾åˆ‡æ¢ OpenAI/Anthropic/Google/Zhipu

### @mariozechner/pi-coding-agent

1. âœ… **Agent åˆ›å»º**: `new Agent({ initialState })`
2. âœ… **ç³»ç»Ÿæç¤ºè¯**: å®šä¹‰ Agent è¡Œä¸ºå’Œè§’è‰²
3. âœ… **å·¥å…·æ³¨å†Œ**: `tools: [tool1, tool2]`
4. âœ… **å¼‚æ­¥æ‰§è¡Œ**: `async execute()`
5. âœ… **è¿›åº¦åé¦ˆ**: `onUpdate()`
6. âœ… **äº‹ä»¶è®¢é˜…**: `agent.subscribe()`
7. âœ… **å·¥å…·é“¾**: è‡ªåŠ¨å·¥å…·åä½œ
8. âœ… **å¯¹è¯ç®¡ç†**: `agent.prompt()`

### å®é™…åº”ç”¨æŠ€èƒ½

1. âœ… HTTP API è°ƒç”¨å’Œå°è£…
2. âœ… RSS è§£æå’Œæ•°æ®è½¬æ¢
3. âœ… å¹¶è¡Œè¯·æ±‚å¤„ç†
4. âœ… æ•°æ®è¿‡æ»¤å’Œèšåˆ
5. âœ… æç¤ºè¯å·¥ç¨‹
6. âœ… é”™è¯¯å¤„ç†å’Œé™çº§
7. âœ… TypeScript ç±»å‹å®‰å…¨
8. âœ… äº‹ä»¶é©±åŠ¨æ¶æ„

---

## ğŸ”„ æ‰©å±•æŒ‡å—

### æ·»åŠ æ–°å·¥å…·

1. åœ¨ `src/tools/` åˆ›å»ºæ–°æ–‡ä»¶
2. å®šä¹‰å·¥å…·ç»“æ„ï¼š

```typescript
export const myNewTool: Tool = {
  name: 'my_new_tool',
  description: '...',
  parameters: Type.Object({ ... }),
  async execute(toolCallId, params, signal, onUpdate, ctx) {
    // å®ç°é€»è¾‘
  }
};
```

3. åœ¨ `src/agent.ts` æ³¨å†Œï¼š

```typescript
tools: [fetchNewsTool, summarizeNewsTool, myNewTool]
```

### åˆ‡æ¢ LLM æ¨¡å‹

```typescript
// ä½¿ç”¨ GPT-4
model: getModel('openai', 'gpt-4o')

// ä½¿ç”¨ Claude
model: getModel('anthropic', 'claude-sonnet-4-20250514')

// ä½¿ç”¨ Gemini
model: getModel('google', 'gemini-2.5-flash')
```

### æ·»åŠ æ–°çš„æ–°é—»æº

ç¼–è¾‘ `src/services/rss.service.ts`ï¼š

```typescript
const RSS_FEEDS: RSSFeedConfig[] = [
  // ... ç°æœ‰ feeds
  {
    name: 'æ–°æºåç§°',
    url: 'https://example.com/rss',
    language: 'zh',
    category: 'ai'
  }
];
```

---

## ğŸ› å¸¸è§é—®é¢˜

### Q: ZHIPU_API_KEY æœªæ‰¾åˆ°

**A**: ç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºäº† `.env` æ–‡ä»¶ï¼Œå¹¶æ­£ç¡®è®¾ç½®äº† API Keyï¼š

```bash
ZHIPU_API_KEY=your_actual_key_here
```

### Q: RSS feeds è·å–å¤±è´¥

**A**: å¯èƒ½çš„åŸå› ï¼š
- ç½‘ç»œè¿æ¥é—®é¢˜
- RSS æºæš‚æ—¶ä¸å¯ç”¨
- éœ€è¦ä»£ç†ï¼ˆåœ¨ .env è®¾ç½® `HTTP_PROXY`ï¼‰

Agent ä¼šè‡ªåŠ¨é™çº§ï¼Œä»…ä½¿ç”¨ HackerNews æ•°æ®ã€‚

### Q: GLM-4 è°ƒç”¨å¤±è´¥

**A**: æ£€æŸ¥ï¼š
1. API Key æ˜¯å¦æ­£ç¡®
2. API Key æ˜¯å¦æœ‰è¶³å¤Ÿé…é¢
3. ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸

### Q: å¦‚ä½•é™åˆ¶ API æˆæœ¬ï¼Ÿ

**A**: 
- å‡å°‘ `limit` å‚æ•°ï¼ˆè·å–æ›´å°‘æ–‡ç« ï¼‰
- ä½¿ç”¨ `brief` é£æ ¼è€Œé `detailed`
- æ£€æŸ¥ token ä½¿ç”¨ç»Ÿè®¡

---

## ğŸ“ é¡¹ç›®æ–‡ä»¶è¯´æ˜

| æ–‡ä»¶ | è¡Œæ•° | è¯´æ˜ |
|------|------|------|
| `src/types/news.types.ts` | ~120 | TypeScript ç±»å‹å®šä¹‰ |
| `src/services/hackernews.service.ts` | ~250 | HackerNews API å°è£… |
| `src/services/rss.service.ts` | ~200 | RSS è§£ææœåŠ¡ |
| `src/tools/fetch-news.tool.ts` | ~200 | æ–°é—»è·å–å·¥å…· |
| `src/tools/summarize-news.tool.ts` | ~180 | GLM-4 æ€»ç»“å·¥å…· |
| `src/agent.ts` | ~180 | Agent æ ¸å¿ƒé€»è¾‘ |
| `src/index.ts` | ~50 | ä¸»å…¥å£ |
| `examples/basic-usage.ts` | ~100 | åŸºç¡€ç¤ºä¾‹ |
| `examples/advanced-usage.ts` | ~150 | é«˜çº§ç¤ºä¾‹ |
| **æ€»è®¡** | **~1,430** | **ä»£ç è¡Œæ•°** |

---

## ğŸ¯ ä¸‹ä¸€æ­¥

1. **è¿è¡Œé¡¹ç›®**: æŒ‰ç…§å¿«é€Ÿå¼€å§‹æŒ‡å—è¿è¡Œ Agent
2. **é˜…è¯»ä»£ç **: ä»”ç»†é˜…è¯»å¸¦æ³¨é‡Šçš„æºä»£ç 
3. **ä¿®æ”¹å·¥å…·**: å°è¯•ä¿®æ”¹å·¥å…·å‚æ•°å’Œé€»è¾‘
4. **æ·»åŠ åŠŸèƒ½**: å®ç°æ–°çš„å·¥å…·æˆ–æ•°æ®æº
5. **åˆ‡æ¢æ¨¡å‹**: å°è¯•ä½¿ç”¨ä¸åŒçš„ LLM æ¨¡å‹

---

## ğŸ“š å‚è€ƒèµ„æº

- [@mariozechner/pi-ai æ–‡æ¡£](https://github.com/badlogic/pi-mono)
- [@mariozechner/pi-coding-agent æ–‡æ¡£](https://github.com/badlogic/pi-mono/tree/main/packages/coding-agent)
- [æ™ºè°± AI GLM-4](https://open.bigmodel.cn/)
- [HackerNews API](https://github.com/HackerNews/API)
- [TypeBox](https://github.com/sinclairzx81/typebox)

---

## ğŸ“„ è®¸å¯è¯

MIT

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ [@mariozechner](https://github.com/badlogic) å¼€å‘çš„ä¼˜ç§€å·¥å…·åº“ï¼

---

**Happy Coding!** ğŸš€
